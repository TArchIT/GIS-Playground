<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Tarchit sfm by DavidKi</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
	   <div class="inhaltsverz"
          <ul>INHALT</ul>
          <li><a href="#kapitel-1-erste-schritte-in-visual-sfm">Kapitel 1: Erste Schritte in Visual SFM</a></li>
            <ul>
              <li><a href="#installation">1.1. Installation 3</a></li>
              <li><a href="#überblick-programmoberfläche-visual-sfm-start">1.2. Überblick Programmoberfläche Visual SfM (Start)</a></li>
              <li><a href="#schritt-1-importieren-der-fotos">1.3. Schritt 1: Importieren der Fotos 5</a></li>
              <li><a href="#schritt-2-berechnung-der-dünnen-punktwolke">1.4. Schritt 2: Berechnung der dünnen Punktwolke</a></li>
              <li><a href="#schritt-3-berechnung-der-dichten-punktwolke">1.5. Schritt 3: Berechnung der dichten Punktwolke</a></li>
              <li><a href="#zusammenfassung-workflow-visualsfm">1.6. Zusammenfassung Workflow VisualSfM</a></li>
            </ul>
          <li><a href="#kapitel-2-erste-schritte-in-meshlab">Kapitel 2: Erste Schritte in MeshLab</a></li>
			<ul>
				<li><a href="#installation-1">2.1. Installation 8</a></li>
				<li><a href="#überblick-programmoberfläche-meshlab">2.2. Überblick Programmoberfläche MeshLab</a></li>
				<li><a href="#laden-der-visualsfm-punktwolken">2.3. Laden der VisualSFM-Punktwolken</a></li>
				<li><a href="#bereinigung-der-dichten-punktwolke">2.4. Bereinigung der dichten Punktwolkea</a>
				<li><a href="#konvertierung-der-dichten-punktwolke-in-ein-gitter">2.5. Konvertierung der dichten Punktwolke in ein Gitter </a></li>
				<li><a href="#bereinigung-des-gitter-non-manifold-edges">2.6. Bereinigung des Gitter (Non-Manifold Edges) </a></li>
				<li><a href="#parametrisierung-der-textur-export">2.7. Parametrisierung der Textur / Export </a></li>
				<li><a href="#zusammenfassung-workflow-meshlab">2.8. Zusammenfassung Workflow MeshLab</a></li>
			</ul>
          <li><a href="#kapitel-3-erste-schritte-in-blender">Kapitel 3: Erste Schritte in Blender</a></li>
			<ul>
          <li><a href="#installation-und-allgemeines">3.1. Installation und Allgemeines</a></li>
          <li><a href="#überblick-programmoberfläche-blender">3.2. Überblick Programmoberfläche Blender</a></li>
          <li><a href="#grundlegendes">3.3. Grundlegendes</a></li>
          <li><a href="#textur-auflegen">3.4. Textur auflegen</a></li>
          <li><a href="#animation-rundflug">3.5. Animation „Rundflug“</a></li>
          <li><a href="#animation-beleuchtung">3.6. Animation: Beleuchtung</a></li>
          <li><a href="#animation-videoexport">3.7. Animation: Videoexport</a></li>
			</ul>	
      </div>
    <div class="wrapper">
   <header>
        <h1>Tarchit sfm</h1>
        <p>Leitfaden zur Anwendung von Open-Source-Software für Structure from Motion in der Archäologie</p>

        <p class="view"><a href="https://github.com/TArchIT/TArchIT_SfM" target="_blank">View the Project on GitHub <small>TArchIT/TArchIT_SfM</small></a></p>


        <ul width=auto>
          <li><a href="https://github.com/DavidKi/TArchIT_SfM/files/pdf" target="_blank">Download <strong>PDF File</strong></a></li>
        </ul>
        <p>Jonas Abele, Marcel C. Hagner, David Kirschenheuter, Florian Tubbesing</p>
        
        
    
              <footer>
        <p>This project is maintained by <a href="https://github.com/TarchIT">TArchIT</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
      </header>
     
      <section>
        <blockquote>
<p>TArchIT Workshop</p>
<blockquote>
<p class=MsoTitle align=center style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:212.4pt;margin-bottom:.0001pt;text-align:center'><span
style='font-size:28.0pt;font-family:"Cambria",serif;color:#CC0000'>T</span><span
style='font-size:28.0pt;font-family:"Cambria",serif;color:#1F4E79'>Arch</span><span
style='font-size:28.0pt;font-family:"Cambria",serif;color:#C00000'>IT</span><span
style='font-size:28.0pt;font-family:"Cambria",serif;color:windowtext'> Workshop</span></p>
</blockquote>
<h2>SfM mit VisualSFM, Meshlab und Blender V1.2</h2>
<p><img src="media/image1.jpg" width="604" height="261" /></p>

<h1 id="kapitel-1-erste-schritte-in-visual-sfm">Kapitel 1: Erste Schritte in Visual SFM</h1>
<h2 id="installation">1.1. Installation</h2>
<ul>
<li><p>VisualSfM muss <strong>nicht installiert</strong> werden und kann z.B. von <a href="http://ccwu.me/vsfm/" class="uri">http://ccwu.me/vsfm/</a> bezogen werden.</p></li>
<li><p>Mittels VisualSFM wird eine dichte Punktwolke aus Fotos erzeugt, welche im Anschluss in ein 3D-Modell überführt werden kann (siehe Kapitel 2 und 3).</p></li>
<li><p>Der gesamte Ordner „Visual_SfM_****“ sollte schlicht auf die Festplatte, wenn möglich auf eine vorhandene SSD (<strong>S</strong>olid-<strong>S</strong>tate-<strong>D</strong>rive), kopiert werden. Es ist aber auch möglich VisualSfM von einem <strong>USB-Stick, SD-Karte oder Netzwerklaufwerk</strong> zu starten, wovon wir dringend abraten <strong>(Verlust von Rechenleistung!)</strong>.</p></li>
<li><p>Um das Programm leichter starten zu können, sollte eine <strong>Verknüpfung der VisualSFM.exe</strong> auf z.B. den <strong>Desktop</strong> oder <strong>die Taskleiste</strong> erstellt werden.</p></li>
</ul>
<p>Hierzu genügt ein <strong>Rechtsklick</strong> auf die *.<strong>exe-Datei</strong> im Ordner „Visual_SfM_****“. Im nun geöffneten Menü kann dann unter <strong>„Senden an“</strong> „<strong>Desktop (Verknüpfung erstellen)“ rasch eine passende Verknüpfung auf den Desktop angelegt werden.</strong></p>
<p><img src="media/image5.png" width="359" height="207" /></p>
<ul>
<li><p>Per Doppelklick auf die *.exe-Datei oder durch einen Klick auf die Verknüpfung, startet Visual SfM.</p></li>
</ul>
<h2 id="überblick-programmoberfläche-visual-sfm-start">1.2. Überblick Programmoberfläche Visual SfM (Start)</h2>
<p><img src="media/image6.png" width="604" height="462" /></p>
<ol style="list-style-type: upper-roman">
<li></li>
</ol>
<ol style="list-style-type: upper-roman">
<li><p><strong>An-/Ausschalten des Protokoll-Fensters</strong></p></li>
<li><p><strong>Laden eines fertigen (dichten) Punktwolken-Modells (*.nvm-Datei)</strong></p></li>
<li><p><strong>Laden von mehreren Bildern zur Durchführung der SfM-Berechnung</strong></p></li>
<li><p><strong>Speichert die aktuelle Ansicht als u.a. *.jpeg (Screenshot)</strong></p></li>
<li><p><strong>Kopiert die aktuelle Ansicht (nicht als Bild!)</strong></p></li>
<li><p><strong>Schaltet Bilder / Bildpaare nach links durch</strong></p></li>
<li><p><strong>Schaltet Bilder / Bildpaare nach rechts durch</strong></p></li>
<li><p><strong>2D-3D- Wechsel</strong></p></li>
<li><p><strong>Auf Miniaturansicht umschalten</strong></p></li>
<li><p><strong>Zoom</strong></p></li>
<li><p><strong>Ansicht wird zurückgesetzt</strong></p></li>
<li><p><strong>Schaltet Einzel- und Multi-Modelle aus und ein</strong></p></li>
<li><p><strong>Zeigt Verknüpfungen an (2D-Modus)</strong></p></li>
<li><p><strong>Berechnet die Bildposition aller Fotos (rechenintensiv)</strong></p></li>
<li><p><strong>Berechnung der dünnen Punktwolke</strong></p></li>
<li><p><strong>Weitere Berechnung der dünnen Punktwolke (z.B. mit einem zusätzlichen Bild)</strong></p></li>
<li><p><strong>Stoppt den laufenden Prozess</strong></p></li>
</ol>
<h2 id="schritt-1-importieren-der-fotos">1.3. Schritt 1: Importieren der Fotos</h2>
<ul>
<img src="media/image8.png" width="34" height="31" />
<img src="media/image9.png" width="22" height="23" />
<li><p>Visual SfM nutzt Fotos <strong>im JPEG-Format</strong></p></li>
<li><p><strong>Fotos</strong> können im Reiter : <strong>File Open + Multi-Images</strong> oder über den Schaltfläche <strong>III geladen werden.</strong></p></li>
<li><p>Dort sind <strong>alle Fotos auszuwählen</strong>, die zur Modellberechnung verwendet werden sollten.</p>
<ul>
<li><p>Mit <strong>[Strg + A]</strong> können Sie u.a. alle Daten eines Ordners markieren.</p></li>
<li><p>Mit <strong>[Strg] + Linker-Maustaste</strong> können einzelne Fotos/Dateien wieder</p></li>
</ul></li>
</ul>
<blockquote>
<p>(ab-)gewählt werden .</p>
</blockquote>
<ul>
<li><p>Das <strong>Importieren</strong> der Fotos dauert meist weniger <strong>als eine Minute. Im Bereich der Informationszeile</strong> wird über Drücken der <strong>[X]-Taste</strong> auf der Tastatur die bisherige <strong>Rechendauer angezeigt,</strong> im Bereich des <strong>Protokollfensters</strong> wird <strong>„Loading image pixel data ...“</strong> stehen. Je nach <strong>Fotomenge</strong> und der jeweiligen <strong>Auflösung</strong> der Aufnahmen dauert dieser Schritt <strong>entsprechend länger</strong>.</p></li>
<li><p>Die Bilder sollten nun als <strong>Miniaturansicht im Modell/Fotofensterbereich</strong> erscheinen.</p></li>
<li><p>Mittels <strong>Rechtsklick</strong> können Sie die <strong>Bilder markieren</strong> (rote Rahmung erscheint).</p></li>
<li><p><strong>Doppelklick auf eines der Bilder</strong> im Modell/Fotofenster zur Vergrößerung des jeweiligen Bildes.</p>
<ul>
<li><p>Mit dem <strong>Mausrad</strong> kann gezoomt werden, Schaltfläche <strong>X</strong> bietet vordefinierte Zoomstufen an.</p></li>
<li><p>Es ist möglich <strong>die Bilder</strong> mit den Knöpfen <strong>VI</strong> (links) und <strong>VII</strong> (rechts) <strong>durchzuschalten</strong>. Dies dient u.a. zur Kontrolle der Bilder auf Schärfe oder unerwünschte Störungen.</p></li>
</ul></li>
</ul>
<h2 id="schritt-2-berechnung-der-dünnen-punktwolke"><img src="media/image10.png" width="27" height="27" />1.4. Schritt 2: Berechnung der dünnen Punktwolke</h2>
<ul>
<li><p><img src="media/image11.png" width="22" height="23" />Durch Drücken der Schaltfläche <strong>XIV</strong> (Compute Missing Matches) werden die Bilder verglichen zu ihren Positionen zugeordnet.</p>
<ul>
<li><p><strong>Dieser Prozess benötigt Zeit!</strong> Sobald der Prozess abgeschlossen ist, werden zusätzliche Daten zu den Bildern hinzugefügt. Diese zusätzlichen Daten ermöglichen es, bei der nächsten Verwendung der Bilder den Rechenschritt (Compute Missing Matches) <strong>zu überspringen.</strong></p></li>
</ul></li>
<li><p>Das Ende des Prozesses kann im Protokoll-Fenster beobachten werden.</p>
<ul>
<li><p>Protokoll-Fenster: <em>„Compute Missing Pairwise Matching, finished“.</em></p></li>
</ul></li>
</ul>
<ul>
<li><p>Nun folgt die Berechnung der <strong>dünnen Punktwolke. </strong></p></li>
<li><p>Durch Drücken der Schaltfläche <strong>XV</strong> (Compute 3D Reconstruction)<img src="media/image11.png" width="22" height="23" /><img src="media/image12.png" width="31" height="27" /> wird die dünne <strong>Punktwolke aus den Bildern berechnet</strong>. Dieser Schritt ist im Modell/Foto-fenster zu beobachten. Mittels der <strong>rechten Maustaste</strong> kann die entstehende Punktwolke während dieses Prozesses <strong>gedreht werden</strong>.</p></li>
<li><p>Das Ende des Prozesses können Sie im Protokoll-Fenster beobachten.</p>
<ul>
<li><p>Protokoll-Fenster: <em>„</em> <em>Run full 3D reconstruction, finished “</em></p></li>
</ul></li>
</ul>
<ul>
<li><p>Durch Drücken der <strong>[Strg]-Taste</strong> und durch die <strong>Betätigung des Mausrades</strong> können die <strong>Bildvorschaufenster vergrößert und verkleinert</strong> werden.</p></li>
<li><p>Durch Drücken der <strong>[Shift]-Taste</strong> und durch die <strong>Betätigung des Mausrades</strong> können Sie die einzelnen <strong>Punkte der Punktwolke vergrößern und verkleinern</strong>.</p></li>
<li><p>Durch <strong>einen Rechtsklick</strong> aus eines der Bildvorschaufenster wird das jeweilige <strong>Bild markiert</strong>. Gleichzeitig leuchten in der Punktwolke die dazugehörigen Punkte rot auf. Dies dient schlicht zur Kontrolle der Bildqualität bzw. der Fotoposition.</p></li>
</ul>
<h2 id="schritt-3-berechnung-der-dichten-punktwolke">1.5. Schritt 3: Berechnung der dichten Punktwolke</h2>
<p><img src="media/image13.png" width="34" height="33" /><em>Um die dichten Punktwolke zu berechnen wird ein weiteres Programm benötigt. Das Programm CMVS ist in der TArchIT-Version von VisualSFM bereits mit im<br />
Programmordner von VisualSFM abgespeichert und muss somit nicht mehr separat heruntergeladen und dorthin abgespeichert werden.</em></p>
<ul>
<li><p><img src="media/image11.png" width="22" height="23" />Direkt nachdem die dünne Punktwolke berechnet wurde (Schritt 2) können Sie über die nun <strong>erweiterte</strong> Schaltfläche CMVS auswählen <strong>(links neben Schaltfläche XVII).</strong></p></li>
<li><p>Nach dem Klicken auf CMVS öffnet sich ein neues Fenster. Dort <strong>muss der Workspace bzw. der Speicherort der dichten Punktwolke gewählt werden. </strong></p>
<ul>
<li><p>Es bietet sich an, <strong>denselben Speicherort</strong> für die dichte Punktewolke wie für die Fotos zu wählen.</p></li>
<li><p>Nachdem der Speicherort gewählt wurde, <strong>beginnt die aufwendige Berechnung der dichten Punktwolke.</strong></p></li>
</ul>
<ul>
<li><p><strong><em>ACHTUNG! Dieser Schritt ist ein aufwendiger Rechenprozess!</em></strong></p></li>
</ul></li>
</ul>
<ul>
<li><p>Je nach Bildmenge und Rechenleistung kann dieser Schritt sehr lange dauern! <strong>Im Bereich der Informationszeile</strong> wird über Drücken <strong>der [X]-</strong>Taste auf der Tastatur die bisherige <strong>Rechendauer angezeigt.</strong></p>
<ul>
<li><p>Im Protokollfenster steht: <em>„This may take a little more time, waiting...”</em></p></li>
</ul></li>
<li><p>Sollte das Protokollfenster nicht mehr vorhanden sein, kann es entweder über einen Klick auf die Schaltfläche <strong>I</strong> oder über die Schaltfläche „<strong>File New Window“</strong> wieder geöffnet werden.</p></li>
<li><p>Das <strong>Ende des Prozesses</strong> kann im Protokoll-Fenster beobachten werden.</p>
<ul>
<li><p>Protokoll-Fenster: <em>„</em> <em>Run dense reconstruction, finished “</em></p></li>
</ul></li>
</ul>
<ul>
<li><p>Durch betätigen der <strong><em>Tab-Taste</em></strong> können Sie nun zwischen der dichten und der der dünnen Punktwolke <strong>hin und her wechseln.</strong></p></li>
</ul>
<blockquote>
<p><em>Wichtig: Die dichte Punktewolke ist kein Modell! Sie besteht nur aus Punkten und muss deshalb in einem weiteren Schritt vernetzt bzw. „vermesht“ werden. Hierzu wird z.B. Meshlab verwendet. Weiteres zu MeshLab in Kapitel 2.</em></p>
</blockquote>
<h2 id="zusammenfassung-workflow-visualsfm">1.6. Zusammenfassung Workflow VisualSfM</h2>
<ol style="list-style-type: decimal">
<li><p>VisualSFM starten.</p></li>
<li><p>Bilder laden ( <strong>Schaltfläche III</strong> oder File Open + Multi-Images).</p>
<ul>
<li><p>Warten bis die Bilder geladen sind.</p></li>
</ul></li>
<li><p>Drücken der <strong>Schaltfläche XIV</strong> (Compute Missing Matches).</p>
<ul>
<li><p>Warten bis der Prozess abgeschlossen ist.</p></li>
</ul></li>
<li><p>Drücken der <strong>Schaltfläche XV</strong> (Compute 3D Reconstruction).</p>
<ul>
<li><p>Warten bis der Prozess abgeschlossen ist.</p></li>
</ul></li>
<li><p>Drücken auf der nun erweiterten <strong>Schaltfläche auf CMVS.</strong></p>
<ul>
<li><p>Warten bis der Prozess abgeschlossen ist.</p></li>
</ul></li>
<li><p>Dichte Punkte ist bereit zur Weiterverarbeitung -&gt; <strong>weiter mit MeshLab…</strong></p></li>
</ol>
<p><img src="media/image017.png" width="577" height="153"/>
<h1 id="kapitel-2-erste-schritte-in-meshlab"><img src="media/image14.png" width="84" height="83" />Kapitel 2: Erste Schritte in MeshLab</h1>
<h2 id="installation-1">2.1. Installation</h2>
<ul>
<li><p>MeshLab kann über z.B. <a href="https://sourceforge.net/projects/meshlab/" class="uri">https://sourceforge.net/projects/meshlab/</a> bezogen werden.</p></li>
<li><p>Nach der Installation kann <strong>MeshLab gestartet werden</strong>. Ein Verknüpfungssymbol sollte bereits <strong>automatisch auf den Desktop</strong> angelegt worden sein.</p></li>
<li><p>Aufgabe von MeshLab ist es, die aus VisualSFM <strong>erstellt dichte Punktwolke</strong> <strong>zu „bereinigen“ und aus ihr ein Gitter (engl. mesh) zu erzeugen.</strong></p></li>
</ul>
<h2 id="überblick-programmoberfläche-meshlab"> 2.2. Überblick Programmoberfläche MeshLab </h2>
<p></p><img src="media/image16.png" width="604" height="327"/></p>
<p><img src="media/image15.png" width="535" height="83" /></p>
<p></p><img src="media/image023.png" width=543 height=39/></p>
<ol style="list-style-type: upper-roman">
<li><p><strong>Öffnen eines neuen Projektes </strong></p></li>
<li><p><strong>Öffnen eines gespeicherten Projektes </strong></p></li>
<li><p><strong>Import eines Gitters / Mesh</strong></p></li>
<li><p><strong>Aktualisieren der Anzeige</strong></p></li>
<li><p><strong>Export des aktuellen Gitters / Mesh</strong></p></li>
<li><p><strong>Speichert die aktuelle Ansicht als u.a. als *.jpeg (Screenshot)</strong></p></li>
<li><p><strong>Öffnet die Layer-Anzeige (meist linker Bildschirmrand)</strong></p></li>
<li><p><strong>Raster-Modus</strong></p></li>
<li><p><strong>Ansicht: Begrenzungsrahmen</strong></p></li>
<li><p><strong>Ansicht: Punktwolke</strong></p></li>
<li><p><strong>Ansicht: Draht-Gitter</strong></p></li>
<li><p><strong>Ansicht: Draht-Gitter mit Flächenanzeige</strong></p></li>
<li><p><strong>Ansicht: Gitter/Modell „kantig“</strong></p></li>
<li><p><strong>Ansicht: Gitter/Modell „glatt“</strong></p></li>
<li><p><strong>Ansicht: Gitter/Modell mit Textur</strong></p></li>
<li><p><strong>Künstliche Modellbeleuchtung an / ausschalten</strong></p></li>
</ol>
<h2 id="laden-der-visualsfm-punktwolken">2.3. Laden der VisualSFM-Punktwolken</h2>
<ul>
<li><p>Zunächst müssen die <strong>Projektdaten (NView Match File)</strong> aus VisualSFM in MeshLab geladen werden.</p></li>
<li><p>Dazu wird MeshLab geöffnet und über Schaltfläche <strong>II</strong> oder über <strong>„File Open project“</strong> das Projekt geöffnet. Benötigt werden hierzu <strong>zwei Dateien</strong>, die VisualSFM automatisch stets mit <strong>derselben Bezeichnung abspeichert.</strong></p>
<ul>
<li><p>Geöffnet werden muss der <strong>Speicherort des VisualSFM-Projektes</strong> (z.B. der Ordner <em>Beispiel</em>.nvs.cvms). Dort befindet sich <strong>ein Unterordner 00.</strong></p></li>
<li><p>Im Unterordner 00 müssen Sie zunächst die Datei: <strong>„bundle.rd.out“ auswählen.</strong></p></li>
<li><p>Danach öffnet sich erneut ein Fenster und nun muss die <strong>passende Textdatei „list“</strong> im selben Verzeichnis (<em>Beispiel</em>.nvs.cvms\00\) ausgewählt werden.</p></li>
</ul></li>
</ul>
<ul>
<li><p>Nach einiger Zeit erscheint dann im Modellfenster die dünne Punktwolke.</p></li>
</ul>
<p><em><strong>(Bitte abwarten) </strong></em></p>
<ul>
<li><p>Gleichzeitig öffnet sich am <strong>rechten Bildschirmrand</strong> ein neues Übersichtfenster <strong>(Layer-Anzeige)</strong> was mittels <strong>VII</strong> an und abgeschaltet werden kann.</p>
<ul>
<li><p>In der Layer-Anzeige werden alle Gitter/Punkten etc. des Projektes angezeigt.</p></li>
</ul></li>
<li><p>Da das gewünschte Gitter mittels der dichten Punktwolke zu erstellen ist, <strong>benötigen Sie die dünne Punktwolke nicht</strong>. Mittels <strong>Rechtsklick auf „0 model“ und der Auswahl „delete current match“</strong> können Layer gelöscht werden.</p></li>
<li><p>Als nächstes muss die von CVMS erstellte <strong>dichte Punktwolke geladen werden.</strong> Über Schaltfläche <strong>III</strong> oder <strong>„File Import mesh“</strong> bzw. <strong>[Strg] + [I]</strong> können Sie diesen Schritt durchführen. Die Datei befindet sich dort, wo sie in <strong>Kapitel 1.5. abgespeichert wurde</strong>, meistens daher im s<strong>elben Verzeichnis wie die Dünne Punkte</strong>.</p></li>
<li><p>Im <strong>Unterordner 00</strong> gibt es einen weiteren <strong>Unterordner „models“</strong>. Dort befindet sich die dichte Punktewolke (z.B. option-0000).</p></li>
</ul>
<h2 id="bereinigung-der-dichten-punktwolke">2.4. Bereinigung der dichten Punktwolke</h2>
<ul>
<li><p><strong>Da bei SFM immer wieder ungewünschte „Punktwolken-Artefakte“ auftreten können, muss die dichte Punktwolke bereinigt, bzw. Punkte gelöscht werden.</strong></p></li>
<li><p>Das Modell bzw. die Punktwolke kann:</p>
<ul>
<li><p>mittels gedrückter linken Maustaste <strong>gedreht</strong> werden</p></li>
<li><p>mittels Mausrad <strong>heran- und herausausgezoomt</strong> werden</p></li>
<li><p>mittels drücken des Mausrads kann die Ansicht auf <strong>das Modell verschoben</strong> werden.</p></li>
</ul></li>
<li><p><img src="media/image17.png" width="40" height="40" />Zunächst müssen Sie die <strong>zu löschende Punkte</strong> mittels der Maus auswählen.</p>
<ul>
<li><p><img src="media/image11.png" width="22" height="23" />Hierzu muss die Schaltfläche <strong>„select vertexes“</strong> betätigt werden.</p></li>
<li><p>Durch gedrückt halten der linken Maustaste ist es dann möglich ein <strong>Markierungsrahmen aufzuziehen.</strong></p></li>
<li><p>Das Drücken der <strong>[Strg]-Taste</strong> ermöglicht es, <strong>weitere Punkte</strong> immer wieder mittels <strong>weiterem Rahmen hinzuzufügen.</strong></p></li>
<li><p>Durch Gedrückt halten der <strong>[Shift]-Taste</strong> können Punkte im selben Prinzip auch <strong>wieder abgewählt werden.</strong></p></li>
<li><p>Um die richtigen Punkte markieren zu können, muss die Punktwolke <strong>stetig gedreht und verschoben werden</strong>. Dies erfordert <em>ein wenig Übung.</em></p></li>
</ul></li>
</ul>
<ul>
<li><p><img src="media/image18.png" width="36" height="34" />Sind nur die gewünschten Punkte markiert, können Sie diese löschen.</p>
<ul>
<li><p><img src="media/image11.png" width="22" height="23" />Hierzu bedienen Sie sich der Schaltfläche <strong>„delete current set of vertices“</strong>.</p></li>
</ul></li>
<li><p>Sobald alle Punkte gelöscht wurden, kann die bereinigte Punktwolke als neue Datei abgespeichert werden. Hierzu wählen Sie in der Tab-Leiste „File Export Mesh as“. Die <strong>neue Punktwolke sollte einen Hinweis enthalten,</strong> dass es sich um die bereinigte Version handelt z.B. Modell_clean.ply.</p></li>
</ul>
<h2 id="konvertierung-der-dichten-punktwolke-in-ein-gitter">2.5. Konvertierung der dichten Punktwolke in ein Gitter</h2>
<ul>
<li><p>Nun muss zwischen den Punkten der dichten Punktwolke <strong>ein Gitter generiert</strong> werden. Hierzu wird die Funktion <strong>„Surface Reconstruction Poisson“</strong> verwendet.</p></li>
<li><p>Über <strong>„Filters Point Set Surface Reconstruction Poisson“</strong> wird der Prozess gestartet.</p></li>
<li><p>Im neu erschienen Einstellungsfenster für „Surface Reconstruction Poisson“ können Sie <strong>unterschiedliche Werte für die Gittererzeugung</strong> wählen.</p></li>
<li><p><em><strong>TArchIT empfiehlt hier: Octree depth: 12; Solver Divide: 10, Samples per node: 1; surface offsetting: 1.</strong></em></p></li>
<li><p>Sobald die Werte eingetragen wurden, wird <strong>der Prozess über „apply“</strong> gestartet.</p>
<ul>
<li><p><strong><em>Dieser Prozess benötigt Rechenzeit!</em></strong></p></li>
</ul></li>
</ul>
<ul>
<li><p>Sobald der Prozess vollendet wurde<strong>, erscheint das neue Gitter im Modellfenster</strong> und in der <strong>Layer-Anzeige.</strong></p></li>
<li><p><img src="media/image19.png" width="37" height="71" />Nun können Sie entweder die dichten Punkte löschen oder ausblenden.</p>
<ul>
<li><p>Über <strong>das Augensymbol</strong> (links neben dem Layernamen) in der Layer-Anzeige kann ein <strong>Layer an- und ausgeschalten werden</strong>.</p></li>
<li><p><strong>Rechts neben dem Layernamen</strong> können <strong>verschiedene Ansichten</strong> ausgewählt werden (z.B. Gitter, Gitter mit Füllung etc.).</p></li>
<li><p><em>Der zu bearbeitende Layer muss stets in der Layer-Anzeige ausgewählt sein.</em></p></li>
</ul></li>
</ul>
<ul>
<li><p>Ähnlich wie die <strong>neue Punktwolke</strong>, <strong>speichern</strong> Sie auch das neue Gitter über <strong>„File Export Mesh as“</strong> als neuer Zwischenschritt.</p></li>
<li><p>Auch das MeshLab-Projekt sollte spätestens jetzt gespeichert werden: <strong>„File Project“.</strong></p></li>
<li><p>Genau wie in Kapitel 2.4. können Sie <strong>das Gitter erneut bereinigen</strong>. Es ist wichtig, die <strong>Punktwolkenansicht des Gitters zu wählen</strong>, da sonst <strong>keine Punkte zur Bearbeitung bzw. zum Löschen ausgewählt werden können</strong>.</p></li>
</ul>
<h2 id="bereinigung-des-gitter-non-manifold-edges">2.6. Bereinigung des Gitter (Non-Manifold Edges)</h2>
<ul>
<li><p><img src="media/image20.png" width="280" height="267" />Das Gitter muss <strong>noch „gesäubert“</strong> werden, bevor Sie <strong>die Textur auflegen können.</strong></p></li>
<li><p>Hierzu muss das Gitter, ein <strong>Manifold-Mesh</strong> werden. <em>Ein Non-Manifold Mesh ist ein Mesh, bei dem eine oder mehrere Kanten zu mehr als zwei Flächen gehören</em>. ???? non oder nicht non?</p></li>
<li><p>Deshalb wählen Sie über <strong>„Filters Selection select non-manifold edges“</strong> und bestätigen dies im neuen Fenster über <strong>„apply“</strong>. <em>Sobald der Prozess abgeschlossen ist, können Sie das Fenster über „close“ schließen.</em></p></li>
<li><p><img src="media/image11.png" width="22" height="23" /><img src="media/image18.png" width="36" height="34" />Nun müssen die <strong>gewählten, gefilterten Kanten gelöscht</strong> werden. Hierfür wird die Schaltfläche <strong>„delete current set of vertices“</strong> betätigt.</p></li>
<li><p>Nun sollten Sie das Gitter erneut zwischenspeichern.</p></li>
</ul>
<h2 id="parametrisierung-der-textur-export">2.7. Parametrisierung der Textur / Export</h2>
<ul>
<li><p><img src="media/image21.png" width="210" height="317" />Nun werden <strong>die Bildinformationen der Fotos</strong> an das Gitter <strong>angepasst</strong>, um später im <strong>Blender die Textur auf das Modell auflegen zu können</strong>.</p></li>
<li><p>Hierzu ist das Werkzeug <strong>„Filters texture parameterization + texturing from registered rasters“</strong> zu wählen. Die Einstellung sollten so angepasst werden, dass sie mit den Werten der Abbildung übereinstimmen</p></li>
<li><p>Dann mit <strong>„apply“</strong> bestätigen.</p></li>
<li><p><em>Nun sind alle Vorbereitungen für die Weiterverarbeitung mit Blender abgeschlossen.</em></p></li>
<li><p>Das fertige Gitter sollte jetzt über <strong>„File Export Mesh as“ (z.B.)</strong> als <strong>*.obj-Datei</strong> exportiert werden.</p></li>
</ul>
<h2 id="zusammenfassung-workflow-meshlab">2.8. Zusammenfassung Workflow MeshLab</h2>
<ol style="list-style-type: decimal">
<li><p>MeshLab starten.</p></li>
<li><p>VisualSFM-Projektdaten laden (Schaltfläche <strong>II</strong> oder über „File Open project“).</p>
<ul>
<li><p>zunächst die Datei: <strong>„bundle.rd.out“ auswählen.</strong></p></li>
<li><p>dann die Datei <strong>„list“ auswählen.</strong></p></li>
<li><p><em>Warten bis die Punktwolke geladen ist.</em></p></li>
</ul></li>
<li><p>Dünne Punkte in der Layer-Anzeige <strong>markieren und löschen.</strong></p></li>
<li><p>Dichte Punktwolke einladen (Über Schaltfläche III oder File Import mesh).</p>
<ul>
<li><p>Warten bis die Punktwolke geladen ist.</p></li>
</ul></li>
<li><p>Punktwolke bereinigen.</p>Punkte markieren<img src="media/image17.png" width="40" height="40" /><img src="media/image030.png" width=31 height=30/><img src="media/image18.png" width="36" height="34" />Punkte löschen</li>
</ol>
<blockquote>
<p> </p>
</blockquote>
<ul>
<li><p>Speichern</p></li>
</ul>
<ol style="list-style-type: decimal">
<li><p>„Surface Reconstruction Poisson“ durchführen.</p>
<ul>
<li><p>Filters Point Set Surface Reconstruction Poisson (12/10/1/1)</p></li>
<li><p>Speichern</p></li>
</ul></li>
<li><p>Bereinigung des neuen Gitters (siehe Punkt 5).</p></li>
<li><p>Bereinigung des Gitter (Non-Manifold Edges).</p>
<ul>
<li><p>„Filters Selection select non-manifold edges“.</p></li>
</ul></li>
<li><p>Textur berechnen.</p>
<ul>
<li><p>„Filters texture parameterization + texturing from registered rasters“.</p></li>
</ul></li>
<li><p>Das fertige Gitter über „File Export Mesh as“ als <strong>*.obj-Datei</strong> exportieren.</p></li>
</ol>
<h1 id="kapitel-3-erste-schritte-in-blender"><img src="media/image22.png" width="96" height="78" />Kapitel 3: Erste Schritte in Blender</h1>
<h2 id="installation-und-allgemeines">3.1. Installation und Allgemeines</h2>
<ul>
<li><p>Blender können Sie über <strong>https://www.blender.org/beziehen</strong>.</p></li>
<li><p>Nach der Installation kann <strong>Blender gestartet werden</strong>. Ein Verknüpfungssymbol sollte bereits automatisch auf den Desktop angelegt worden sein.</p></li>
<li><p>Die Aufgabe von Blender ist es, das Gitter aus MeshLab mit Textur zu versehen und aus dem 3D-Modell ein anschauliches Video zu generieren.</p></li>
</ul>
<p><em>Blender ist ein sehr komplexes Programm und bietet erstaunlich viele Anwendungsmöglichkeiten und Funktionen.</em></p>
<h2 id="überblick-programmoberfläche-blender"><img src="media/image23.png" width="642" height="339" />3.2. Überblick Programmoberfläche Blender</h2>
<ol style="list-style-type: decimal">
<li><p>Tool-Shelf: Werkzeuge.</p></li>
<li><p>Properties-Shelf: Eigenschaften von Objekten ändern (Position, Größe, Rotation u.v.m.).</p></li>
<li><p>Outliner: Alle Elemente im Projekt, &quot;Inhaltsverzeichnis&quot;.</p></li>
<li><p>Properties-Fenster: Zugriff auf Einstellungen für Beleuchtung, Kamera, Oberflächenbeschaffenheit und anderen Detaileigenschaften.</p></li>
<li><p>Zeitleiste: Ablauf der Animation.</p></li>
<li><p>3D-Fenster: Arbeitsbereich.</p></li>
</ol>
<h2 id="grundlegendes">3.3. Grundlegendes</h2>
<ul>
<li><p><em><strong>Navigation</strong></em></p>
<ul>
<li><p><em>Zoom: Mausrad</em></p></li>
<li><p><em>Links/Rechts: [STRG]+Mausrad</em></p></li>
<li><p><em>Hoch/Runter: [STRG]+Mausrad</em></p></li>
<li><p><em>frei bewegen: Mausrad drücken und Maus bewegen</em></p></li>
</ul></li>
<li><p><em><strong>Ansichten</strong></em></p>
<ul>
<li><p><em>4-Fenster-Ansicht öffnen/schließen: [STRG]+[ALT]+[Q]</em></p></li>
<li><p><em>Definierte Ansichten, Vorne/Rechts/Oben/Unten: [Num 1/3/7/9]</em></p></li>
<li><p><em>Gesamte Szene anzeigen: [Pos 1]</em></p></li>
</ul></li>
<li><p><em><strong>Auswählen</strong></em></p>
<ul>
<li><p><em>Objekte auswählen: rechte Maustaste, mit [Shift] mehre Auswählen oder einzelne abwählen</em></p></li>
</ul></li>
<li><p><em><strong>Kamera</strong></em></p>
<ul>
<li><p><em>[Strg]+[Alt] + [0] setzt die Kamera auf die aktuelle Blickposition</em></p></li>
<li><p><em>[Num 0] Kamerasicht ein / aus</em></p></li>
</ul></li>
</ul>
<ul>
<li><p><em><strong>Modellberechnung</strong></em></p></li>
</ul>
<ul>
<li><p><em>[F12] Render-Vorschau/Modus</em></p></li>
</ul>
<h2 id="textur-auflegen">3.4. Textur auflegen</h2>
<ul>
<li><p>Blender starten.</p></li>
<li><p><strong>[Entf] + [Enter]: entfernt den Standardwürfel.</strong></p></li>
</ul>
<ul>
<li><p><em>Import der SFM-Datei:.</em></p>
<ul>
<li><p>Unter <strong>„File Import“</strong>: <strong>Dateiformat *.obj wählen</strong> und dann den Speicherort des aus <strong>MeshLab exportieren Gitters auf der Festplatte</strong> auswählen.</p></li>
<li><p><em>Warten bis das Gitter geladen ist.</em></p></li>
</ul></li>
</ul>
<ul>
<li><p><strong><em>Modell/Gitter mit der rechten Maustaste auswählen.</em></strong></p></li>
</ul>
<p><img src="media/image24.png" width="36" height="37" /><em>Fotos als Oberflächenmaterial</em></p>
<ul>
<li><p>Im Properties-Fenster <strong>(4)</strong> auf die <strong><em>Textur-Schaltfläche</em></strong> klicken <strong>(Schachbrett)</strong></p></li>
</ul>
<p><img src="media/image11.png" width="22" height="23" /> und im Menübereich darunter das <strong>Runde-Schachbrettsymbol</strong> auswählen.</p>
<blockquote>
<p><img src="media/image25.png" width="114" height="43" /></p>
<p><img src="media/image11.png" width="22" height="23" /></p>
</blockquote>
<ul>
<li><p>Im <strong>Image-Tab-Bereich</strong> (<em>NICHT SOURCE</em>) auf <strong>„Open (Ordner-Symbol)“</strong> klicken.</p></li>
</ul>
<blockquote>
<p><img src="media/image26.png" width="222" height="20" /></p>
<p><img src="media/image11.png" width="22" height="23" /></p>
</blockquote>
<ul>
<li><p>Jetzt laden Sie die zu dem Gitter <strong>dazugehörige PNG-Datei</strong>, die MeshLab in Punkt 2.7 erstellt hat.</p></li>
<li><p>Diese Datei heißt <strong>„texture.png“</strong> und befindet sich in <em>Beispiel</em>.nvm.cmvs\ 00\models\.</p></li>
<li><p><img src="media/image27.png" width="38" height="43" />Diese Datei muss ausgewählt werden.</p></li>
</ul>
<ul>
<li><p>In der Haupt-Tab-Leiste <strong>(4)</strong> gehen Sie nun auf Material <strong>(Schachbrett).</strong></p></li>
<li><p><img src="media/image11.png" width="22" height="23" />Im Material-Bereich <strong>unter Shading den Haken bei shadeless setzen.</strong></p></li>
</ul>
<p><img src="media/image28.png" width="216" height="100" /></p>
<ul>
<li><p>[F12] öffnet <strong>den „Render-Modus“</strong> und zeigt das Ergebnis, <strong>[ESC] schließt ihn wieder.</strong></p></li>
</ul>
<h2 id="animation-rundflug">3.5. Animation „Rundflug“</h2>
<ul>
<li><p>Objekt platzieren:</p>
<ul>
<li><p><strong>4-er-Fenster</strong> aktivieren: [STRG]+[ALT]+[Q].</p></li>
<li><p><strong>Objekt markieren</strong> (rechte Maustaste).</p></li>
<li><p>Oberhalb der Zeitleiste <strong>(5)</strong>, links der Schaltfläche <strong>„Global“</strong> den <strong>blauen Bogen anwählen</strong> und im <strong>3D-Fenster durch klicken</strong> mit der linken Maustaste auf die <strong>Achsen des Drehkreuzes das Objekt rotieren.</strong></p></li>
</ul></li>
</ul>
<blockquote>
<p><img src="media/image29.png" width="153" height="20" /></p>
</blockquote>
<ul>
<li><p>Dann wieder oberhalb der Zeitleiste <strong>(5)</strong> auf den Pfeil klicken und das Objekt <strong>in den Raumesrichtungen verschieben.</strong></p></li>
</ul>
<blockquote>
<p><img src="media/image30.png" width="153" height="21" /></p>
</blockquote>
<ul>
<li><p>Pfad hinzufügen:</p>
<ul>
<li><p>Oberhalb der Zeitleiste <strong>(5)</strong>: „Add &gt; Curve &gt; Circle“.</p></li>
<li><p><strong>Am blauen Pfeil mit linker Maustaste</strong> nach oben auf <strong>die Höhe</strong>, auf der später die Kamera kreisen soll, ziehen.</p></li>
<li><p>Mit dem Cursor in die Mitte des Kreises zielen <strong>und [S] drücken</strong>, dann Maus bewegen, bis <strong>der Kreis etwas größer als die gesamte Szene ist</strong>. Mit <strong>linker Maustaste abschließen.</strong></p></li>
</ul></li>
<li><p><em>Kamera einstellen</em></p>
<ul>
<li><p><strong>Kamera markieren.</strong></p></li>
<li><p>mit den oben beschrieben Methoden in die Nähe des Kreises schieben <strong>(linke Maustaste auf die Koordinatenachsen).</strong></p></li>
<li><p>Dann <strong>[Shift]+ rechte Maustaste auf den Kreis.</strong></p></li>
<li><p><strong>[STRG]+[P] „Follow path“</strong> auswählen → <strong><em>Kamera folgt dem Kreispfad.</em></strong></p></li>
<li><p><strong>Kamera auswählen und mit [Shift]</strong> <strong>zusätzlich das Objekt markieren.</strong></p></li>
<li><p><strong>[Shift]+[T] &gt;“Track to Constraint“ auswählen</strong> → Kamera <strong>fokussiert immer automatisch Zielobjekt.</strong></p></li>
<li><p><strong>[ALT]+[A] startet die Kamerafahrt</strong> (die „Animation“), stoppen mit [ESC].</p></li>
<li><p><strong>[Num 0] schaltet die Kamerasicht ein/aus</strong>. Jetzt nochmal die Animation starten.</p></li>
<li><p>Ggf. muss der Fokuspunkt der Kamera geändert werden.</p>
<ul>
<li><p>Dazu das <strong>3D-Objekt markieren.</strong></p></li>
<li><p>mit <strong>[N] das Properties-Shelf öffnen.</strong></p></li>
<li><p>unter <strong>3D-Cursor den 3D-Cursor auf die Stelle setzten, auf die die Kamera fokussieren soll.</strong></p></li>
<li><p>Dann im Tool-Shelf unter <strong>„Tools“ auf „Set-Origin“ klicken und „Origin to 3D-Cursor“ wählen.</strong></p></li>
<li><p>Der <strong>Kamerafokus sollte sich jetzt geändert haben.</strong></p></li>
</ul></li>
<li><p>Kamera nun so positionieren, <strong>dass das gesamte Objekt sichtbar ist.</strong></p></li>
</ul></li>
<li><p><em>Geschwindigkeit der Kamera regulieren</em></p>
<ul>
<li><p><strong>Kreis markieren.</strong></p></li>
<li><p>im <strong>Properties-Fenster das Kurven-Symbol</strong> markieren.</p></li>
<li><p><strong>unter „Path Animation“ die Frame-Anzahl erhöhen</strong>, um die Geschwindigkeit zu verringern und umgekehrt.</p></li>
</ul></li>
</ul>
<h2 id="animation-beleuchtung">3.6. Animation: Beleuchtung</h2>
<ul>
<li><p><strong>Lampe markieren und im Properties-Fenster auf das Lampensymbol klicken.</strong></p>
<ul>
<li><p>Hier können verschiedene <strong>Lampenarten gewählt</strong> werden. <strong>Hemi leuchtet</strong> dabei die komplette Szene <strong>ohne Schatten aus</strong>.</p></li>
<li><p>Um den Effekt zu sehen, sollte man oberhalb der Zeitleiste, rechts der Schaltfläche „Object Mode“ auf das Kreissymbol klicken und „Texture“ wählen.</p></li>
<li><p>Die Lampe kann anschließend wie die anderen Objekte transformiert werden (<strong>verschieben, Rotieren, skalieren</strong>), um den <strong>Schattenwurf zu kontrollieren.</strong></p></li>
<li><p><strong>mit [LEERTASTE] und dem Befehl „Add Lamp“ können weiter Lampen hinzugefügt werden.</strong></p></li>
</ul></li>
</ul>
<h2 id="animation-videoexport">3.7. Animation: Videoexport</h2>
<ul>
<li><p><em>Video exportieren</em></p>
<ul>
<li><p>Im Properties-Fenster <strong>auf die Kamera klicken</strong></p></li>
<li><p>Unter „<strong>Output“ ein Verzeichnis</strong> und einen Namen wählen und als Dateiformat ein Videoformat wählen<strong>, z. B. AVI JPEG</strong></p></li>
<li><p>Dann im oberen Bereich auf <strong>„Animation“ klicken</strong> und <strong>warten bis der Prozess durchgelaufen ist</strong> (Je nach Modell, Länge der Animation, Auflösung, der Hardware etc. kann <em>dieser Prozess einige Zeit benötigen</em>)</p></li>
<li><p>Unter dem oben angegebenem Pfad sollte nun <strong>eine Videodatei zu finden</strong> sein, die z. B. <strong>in Präsentation eingebunden</strong> werden kann.</p></li>
<li><p><em>Alternativ kann auch ein Bild einer bestimmten Kameraposition exportiert werden. Dazu beim Dateityp ein Bildformat wählen und auf Animation klicken. Dann werden alle Frames als Bild gespeichert.</em></p></li>
</ul></li>
</ul>
      </section>
   
    </div>
    
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
